<div class="row mt-3">
    <div class="col-lg-4">
        <span class="h2">Task List</span>
    </div>
</div>

<div class="row mt-3">
    <div class="col-lg-4 mb-3">
        <input class="form-control" [(ngModel)]="newTaskText" (keyup.enter)="add()" type="text" required>
    </div>
    <div class="col-lg-4 mb-3">
        <button class="btn btn-primary btn-wide col-lg-4" (click)="add()" [disabled]="!newTaskText.length">Add</button>
    </div>
</div>

<div class="row">
    <div class="col-lg-4">
        <ul class="list-group" cdkDropList (cdkDropListDropped)="drop($event)">
            <li class="list-group-item text-large" *ngFor="let task of tasks; let i = index;" cdkDrag>
                <span [hidden]="editIndex === i">
                    <input type="checkbox" class="checkbox-big mr-2" [(ngModel)]="task.done" (change)="save()">
                    <span class="task-text">{{task.text}}</span>
                    <button class="btn btn-danger float-right ml-3" (click)="deleteTask(i)">X</button>
                    <button class="btn btn-warning float-right" (click)="enableEditing(i)">...</button>
                </span>
                <span [hidden]="editIndex !== i" class="row">
                    <span class="col-9">
                        <input type="text" class="form-control" [(ngModel)]="task.text" (change)="save()"
                            (keyup.enter)="update()">
                    </span>
                    <span class="col-3">
                        <button class="btn btn-primary col-12" (click)="update()">Ok</button>
                    </span>
                </span>
            </li>
        </ul>
    </div>
</div>